# Add scaf aliases
eval "$(scaf)"
eval "$(scaf .)"
alias | grep -P --color=always '^(alias \K[^=]+)(?=.+scaf )'

# Add aliases for each executable in each service's bin directory
MHS_LOCAL_ROOT="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
for svc_dir in "$MHS_LOCAL_ROOT"/services/*; do
  service="$(basename "$svc_dir")"
  bin_dir="$svc_dir/bin"
  
  if [ -d "$bin_dir" ]; then
    echo "Aliasing commands for $service"
    
    for cmd in "$bin_dir"/*; do
      if [ -f "$cmd" ] && [ -x "$cmd" ]; then
        cmd_name="$(basename "$cmd")"
        
        # If the script name matches the service, don't prefix
        if [ "$cmd_name" = "$service" ]; then
          alias_name="$service"
        else
          alias_name="${service}-${cmd_name}"
        fi
        
        alias "$alias_name"="$MHS_LOCAL_ROOT/run $cmd"
      fi
    done
    alias | grep "^alias $service"
  fi
done
